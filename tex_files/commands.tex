% Oscar's command (it works): Fills blank pages until next odd-numbered page.
% Used to emulate single-sided frontmatter. This will work for title, abstract
% and declaration. Though the contents sections will each start on an
% odd-numbered page they will spill over onto the even-numbered pages if
% extending beyond one page (hopefully, this is ok).
\newcommand{\clearemptydoublepage}{\newpage{\thispagestyle{empty}\cleardoublepage}}

% My caption style
\newcommand{\mycaption}[2][\@empty]{
	\captionnamefont{\scshape}
	\changecaptionwidth
	\captionwidth{0.9\linewidth}
	\captiondelim{.\:}
	\indentcaption{0.75cm}
	\captionstyle[\centering]{}
	\setlength{\belowcaptionskip}{10pt}
	\ifx \@empty#1 \caption{#2}\else \caption[#1]{#2}
}

% My subcaption style
\newcommand{\mysubcaption}[2][\@empty]{
	\subcaptionsize{\small}
	\hangsubcaption
	\subcaptionlabelfont{\rmfamily}
	\sidecapstyle{\raggedright}
	\setlength{\belowcaptionskip}{10pt}
	\ifx \@empty#1 \subcaption{#2}\else \subcaption[#1]{#2}
}

%An initial of the very first character of the content
\newcommand{\initial}[1]{%
	\lettrine[lines=3,lhang=0.33,nindent=0em]{
		\color{gray}
     		{\textsc{#1}}}{}}

\def\vdotfill#1{\vtop to0pt{\null \dimen0=#1\baselineskip\advance\dimen0 by-.4ex 
   \kern-1.6ex \cleaders\hbox{\lower.4ex\vbox to1ex{}.}\vskip\dimen0 \vss}}

\newcommand{\aggr}[1]{\underset{#1}{\operatorname{aggr}}\;}
\newcommand{\rui}{r_{ui}}
\newcommand{\ruj}{r_{uj}}
\newcommand{\rvi}{r_{vi}}
\newcommand{\predrui}{\hat{r}_{ui}}
\newcommand{\predruj}{\hat{r}_{uj}}
\newcommand{\Iu}{I_u}
\newcommand{\Ui}{U_i}
\newcommand{\Uij}{U_{ij}}
\newcommand{\Iuv}{I_{uv}}
\newcommand{\Rtrain}{R_{\text{train}}}
\newcommand{\Rtest}{R_{\text{test}}}
\newcommand{\ssim}{\text{sim}} % similarity... \sim already exists
\newcommand{\clonedist}{\text{Clone\_dist}} % clone dist
\newcommand{\clonesim}{\text{Clone\_sim}} % clone sim

\newcommand*\albl[1]{\overline{f}(#1)}
\newcommand*\nan[0]{1\text{-nan}} %pour 1nan
\newcommand*\nanemph[0]{1\emph{-nan}} %pour 1nan dans une def ou une prop
\newcommand*\knan[0]{k\text{-nan}} %pour knan
\newcommand*\knn[0]{k\text{-nn}} %pour knn
\newcommand*\NAN[0]{\mbox{NAN}} %pour NaN
\newcommand*\nn[0]{1\mbox{-nn}} %pour 1nn
\newcommand*\NN[0]{\text{NN}} %pour NN
\newcommand*\acc[0]{\mbox{Acc}} %pour Acc
\newcommand\given[1][]{\:#1\vert\:} %pour proba conditionnelle
% pour equal by def
\newcommand\eqdef{\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily
def}}}{=}}}
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}} % sais pas
\newcommand*\aext[2]{\mathbf{E}_{#1}^{#2}} % Analogical extension
\newcommand*\esf[0]{\mathbf{E}_{S}^{f}} % Analogical extension
\newcommand*\esfs[0]{\mathbf{E}_{S}^{f*}} % Analogical extension star
\newcommand*\aroot[3]{\mathbf{R}_{#1}^{#2}(#3)} % Analogical root
\newcommand*\rsfx[0]{\mathbf{R}_{S}^{f}(\mathbf{x})} % Analogical extension
\newcommand*\sol[0]{\text{sol}} % solution
\newcommand*\solvable[0]{\text{solvable}} % solvable
\newcommand*\AD[0]{\text{AD}} % Analogical Dissimilarity
\newcommand{\norm}[2]{{\left\lVert#2\right\rVert}_{#1}} % Norm definition
\newcommand*\omegasf[0]{\omega_{S}^{f}} % omega
\newcommand*\surpmax[0]{\text{Surp}^{\text{max}}} % surp max
\newcommand*\surpavg[0]{\text{Surp}^{\text{avg}}} % surp avg
\newcommand*\supp[0]{\text{supp}} % support
\newcommand*\knns[0]{k\text{-NN}^*} % knn star (with baseline)
\newcommand*\FCP[0]{\text{FCP}} % FCP
\newcommand*\bin[0]{\text{bin}} % bin
\newcommand*\binemph[0]{\emph{bin}} % binemph

\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\plim}{\mathit{p}-lim}
\newcommand{\pluseq}{\mathrel{+}=} % +=
\DeclareMathOperator{\ess}{ess}

% For vertical and horizontal bars in matrices
\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand*{\horzbar}{\rule[.5ex]{2.5ex}{0.5pt}}

\theoremstyle{plain}  % Will be in italic
\newtheorem{proposition}{Proposition}[chapter]
\newtheorem{property}{Property}[chapter]

\theoremstyle{definition}  % Will not be italic
\newtheorem{definition}{Definition}[chapter]
\newtheorem{example}{Example}[chapter]

% For signed quote env
\def\signed #1{{\leavevmode\unskip\nobreak\hfil\penalty50\hskip2em
\hbox{}\nobreak\hfil(#1)%
\parfillskip=0pt \finalhyphendemerits=0 \endgraf}}
\newsavebox\mybox \newenvironment{aquote}[1]
{\savebox\mybox{#1}\begin{quote}}
{\signed{\usebox\mybox}\end{quote}}

% EXAMPLE environment
\newcounter{testexample}
\def\exampletext{Example} % If English
\NewDocumentEnvironment{testexample}{ O{} }
{
\colorlet{colexam}{black} % Global example color
\newtcolorbox[use counter=testexample]{testexamplebox}{%
    % Example Frame Start
    empty,% Empty previously set parameters
    title={\exampletext: #1},% use \thetcbcounter to access the testexample counter text
    % Attaching a box requires an overlay
    attach boxed title to top left,
       % Ensures proper line breaking in longer titles
       minipage boxed title,
    % (boxed title style requires an overlay)
    boxed title style={empty,size=minimal,toprule=0pt,top=4pt,left=3mm,overlay={}},
    coltitle=colexam,fonttitle=\bfseries,
    before=\par\medskip\noindent,parbox=false,boxsep=0pt,left=3mm,right=0mm,top=2pt,breakable,pad at break=0mm,
       before upper=\csname @totalleftmargin\endcsname0pt, % Use instead of parbox=true. This ensures parskip is inherited by box.
    % Handles box when it exists on one page only
    overlay unbroken={\draw[colexam,line width=.5pt] ([xshift=-0pt]title.north west) -- ([xshift=-0pt]frame.south west); },
    % Handles multipage box: first page
    overlay first={\draw[colexam,line width=.5pt] ([xshift=-0pt]title.north west) -- ([xshift=-0pt]frame.south west); },
    % Handles multipage box: middle page
    overlay middle={\draw[colexam,line width=.5pt] ([xshift=-0pt]frame.north west) -- ([xshift=-0pt]frame.south west); },
    % Handles multipage box: last page
    overlay last={\draw[colexam,line width=.5pt] ([xshift=-0pt]frame.north west) -- ([xshift=-0pt]frame.south west); },%
    }
\begin{testexamplebox}}
{\end{testexamplebox}\endlist}


\newcommand{\repeatcaption}[2]{%
  \renewcommand{\thefigure}{\ref{#1}}%
  \captionsetup{list=no}%
  \caption{#2 (repeated from page \pageref{#1})}%
}
